(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const s={HOME:"/",BOOKSHELF:"/bookshelf"},l={HOME:"/templates/home.html",BOOKSHELF:"/templates/bookshelf.html",NOT_FOUND:"/templates/not-found.html"},c=document.querySelector("#app"),u=new Map;window.addEventListener("popstate",()=>{m().catch(p)});document.addEventListener("click",g);m().catch(p);function d(e){return e.replace(/\/+$/,"")||s.HOME}function h(){return d(window.location.pathname)}function O(e){const t=d(e);t!==h()&&(window.history.pushState({},"",t),m().catch(p))}function g(e){if(e.defaultPrevented||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;const t=e.target.closest("a[href]");if(!t||t.hasAttribute("download")||t.target&&t.target!=="_self")return;const o=new URL(t.href,window.location.origin);if(o.origin!==window.location.origin)return;const i=d(o.pathname);i!==s.HOME&&i!==s.BOOKSHELF||(e.preventDefault(),O(i))}async function m(){const e=h(),t=e===s.HOME;if(document.body.classList.toggle("route-home",t),document.body.classList.toggle("route-bookshelf",e===s.BOOKSHELF),t){c.innerHTML=await f(l.HOME);return}if(e===s.BOOKSHELF){c.innerHTML=await f(l.BOOKSHELF);return}c.innerHTML=await f(l.NOT_FOUND)}async function f(e){if(u.has(e))return u.get(e);const t=await fetch(e);if(!t.ok)throw new Error(`Failed to load template: ${e} (${t.status})`);const o=await t.text();return u.set(e,o),o}function p(e){c.innerHTML=`
    <main class="content">
      <h1>Something went wrong</h1>
      <p>${w(e.message)}</p>
    </main>
  `}function w(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")}
